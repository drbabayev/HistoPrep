


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>histoprep.preprocess.functional package &mdash; HistoPrep</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!-- <link rel="stylesheet" href="../_static/pygments.css" type="text/css" /> -->
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 

  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-167094275-1"></script>
  <script src="../_static/js/googleanalytics.min.js"></script>
  
  <script src="../_static/js/modernizr.min.js"></script>

  <!-- Preload the theme fonts -->

<link rel="preload" href="../_static/fonts/FreightSans/freight-sans-book.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../_static/fonts/FreightSans/freight-sans-medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../_static/fonts/IBMPlexMono/IBMPlexMono-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../_static/fonts/FreightSans/freight-sans-bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../_static/fonts/FreightSans/freight-sans-medium-italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../_static/fonts/IBMPlexMono/IBMPlexMono-SemiBold.woff2" as="font" type="font/woff2" crossorigin="anonymous">

<!-- Preload the katex fonts -->

<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Caligraphic-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
</head>

<div class="container-fluid header-holder tutorials-header" id="header-holder">
  <div class="container">
    <div class="header-container">
      <a class="header-logo" href="https://catalyst-team.com/" aria-label="Catalyst"></a>

      <div class="main-menu">
        <ul>

          <li>
            <div class="ecosystem-dropdown">
              <a id="dropdownMenuButtonEcosystem" data-toggle="ecosystem-dropdown">
                Ecosystem
              </a>
              <div class="ecosystem-dropdown-menu">
                <a class="nav-dropdown-item" href="https://alchemy.host">
                  <span class=dropdown-title>Alchemy</span>
                  <p>Experiments logging & visualization</p>
                </a>
                <a class="nav-dropdown-item" href="https://github.com/catalyst-team/catalyst">
                  <span class=dropdown-title>Catalyst</span>
                  <p>Accelerated deep learning R&D</p>
                </a>
                <a class="nav-dropdown-item" href="https://github.com/catalyst-team/reaction">
                  <span class=dropdown-title>Reaction</span>
                  <p>Convenient deep learning models serving</p>
                </a>
              </div>
            </div>
          </li>

          <li>
            <div class="projects-dropdown">
              <a id="dropdownMenuButtonProjects" data-toggle="projects-dropdown">
                Projects
              </a>
              <div class="projects-dropdown-menu">
                <a class="nav-dropdown-item" href="https://github.com/catalyst-team/codestyle">
                  <span class=dropdown-title>Codestyle</span>
                  <p>Joint R&D codestyle</p>
                </a>
                <a class="nav-dropdown-item" href="https://github.com/catalyst-team/neuro">
                  <span class=dropdown-title>Catalyst.Neuro</span>
                  <p>Catalyst.Team and TReNDS collaborative project</p>
                </a>
                <a class="nav-dropdown-item" href="https://github.com/catalyst-team/classification">
                  <span class=dropdown-title>Classification</span>
                  <p>Image classification pipeline with transfer learning</p>
                </a>
                <a class="nav-dropdown-item" href="https://github.com/catalyst-team/detection">
                  <span class=dropdown-title>Detection</span>
                  <p>Object detection pipeline</p>
                </a>
                <a class="nav-dropdown-item" href="https://github.com/catalyst-team/segmentation">
                  <span class=dropdown-title>Segmentation</span>
                  <p>Image semantic segmentation pipeline</p>
                </a>
                <a class="nav-dropdown-item" href="https://github.com/catalyst-team/gan">
                  <span class=dropdown-title>Catalyst.GAN</span>
                  <p>GAN pipelines</p>
                </a>
              </div>
            </div>
          </li>

          <li>
            <a href="https://github.com/catalyst-team/dl-course">Deep learning course</a>
          </li>
        </ul>
      </div>

      <a class="main-menu-open-button" href="#" data-behavior="open-mobile-menu"></a>
    </div>

  </div>
</div>


<body class="catalyst-body">

   

    

    <div class="table-of-contents-link-wrapper">
      <span>Table of Contents</span>
      <a href="#" class="toggle-table-of-contents" data-behavior="toggle-table-of-contents"></a>
    </div>

    <nav data-toggle="wy-nav-shift" class="catalyst-left-menu" id="catalyst-left-menu">
      <div class="catalyst-side-scroll">
        <div class="catalyst-menu catalyst-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          <div class="catalyst-left-menu-search">
            

            
              
              
            

            


  


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

            
          </div>

          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">histoprep.preprocess.functional package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-histoprep.preprocess.functional.utils">histoprep.preprocess.functional.utils module</a></li>
<li><a class="reference internal" href="#module-histoprep.preprocess.functional">Module contents</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <div class="catalyst-container">
      <div class="catalyst-page-level-bar" id="catalyst-page-level-bar">
        <div class="catalyst-breadcrumbs-wrapper">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="catalyst-breadcrumbs">
    
      <li>
        <a href="../index.html">
          
            Docs
          
        </a> &gt;
      </li>

        
      <li>histoprep.preprocess.functional package</li>
    
    
      <li class="catalyst-breadcrumbs-aside">
        
            
            <a href="../_sources/source/histoprep.preprocess.functional.rst.txt" rel="nofollow"><img src="../_static/images/view-page-source-icon.svg"></a>
          
        
      </li>
    
  </ul>

  
</div>
        </div>

        <div class="catalyst-shortcuts-wrapper" id="catalyst-shortcuts-wrapper">
          Shortcuts
        </div>
      </div>

      <section data-toggle="wy-nav-shift" id="catalyst-content-wrap" class="catalyst-content-wrap">
        <div class="catalyst-content-left">
          
          <div class="rst-content">
          
            <div role="main" class="main-content" itemscope="itemscope" itemtype="http://schema.org/Article">
             <article itemprop="articleBody" id="catalyst-article" class="catalyst-article">
              
  <div class="section" id="histoprep-preprocess-functional-package">
<h1>histoprep.preprocess.functional package<a class="headerlink" href="#histoprep-preprocess-functional-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-histoprep.preprocess.functional.utils">
<span id="histoprep-preprocess-functional-utils-module"></span><h2>histoprep.preprocess.functional.utils module<a class="headerlink" href="#module-histoprep.preprocess.functional.utils" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="histoprep.preprocess.functional.utils.HSV_quantiles">
<code class="sig-prename descclassname">histoprep.preprocess.functional.utils.</code><code class="sig-name descname">HSV_quantiles</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>numpy.ndarray<span class="p">, </span>PIL.Image.Image<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">quantiles</span><span class="p">:</span> <span class="n">List<span class="p">[</span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">[0.01, 0.05, 0.1, 0.25, 0.5, 0.75, 0.9, 0.95, 0.99]</span></em>, <em class="sig-param"><span class="n">mask</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>numpy.ndarray<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">resize</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">threshold</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Dict<span class="p">[</span>int<span class="p">, </span>int<span class="p">]</span><a class="reference internal" href="../_modules/histoprep/preprocess/functional/utils.html#HSV_quantiles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#histoprep.preprocess.functional.utils.HSV_quantiles" title="Permalink to this definition">¶</a></dt>
<dd><p>HSV channel quantiles.</p>
<p>Useful in the detection of misclassified tissue and artifacts.</p>
<dl class="simple">
<dt>Arguments:</dt><dd><dl class="simple">
<dt>image: </dt><dd><p>Input image.</p>
</dd>
<dt>mask: </dt><dd><p>Tissue mask for the input image. Will be generated if not defined.</p>
</dd>
<dt>quantiles: </dt><dd><p>The quantiles of hue, sat and value values for tissue areas.</p>
</dd>
<dt>resize: </dt><dd><p>Resize the image to resize x resize. The function can become 
really slow with large images, in these situations just use this
option.</p>
</dd>
<dt>threshold: </dt><dd><p>For tissue_mask() function. Ignored if mask is defined.</p>
</dd>
</dl>
</dd>
<dt>Return:</dt><dd><dl class="simple">
<dt>dict: A dictionary of the quantiles of hue, sat and value values for </dt><dd><p>tissue areas.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="histoprep.preprocess.functional.utils.PIL_to_array">
<code class="sig-prename descclassname">histoprep.preprocess.functional.utils.</code><code class="sig-name descname">PIL_to_array</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span><span class="p">:</span> <span class="n">PIL.Image.Image</span></em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="reference internal" href="../_modules/histoprep/preprocess/functional/utils.html#PIL_to_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#histoprep.preprocess.functional.utils.PIL_to_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Pillow image to numpy array.</p>
</dd></dl>

<dl class="py function">
<dt id="histoprep.preprocess.functional.utils.RGB_quantiles">
<code class="sig-prename descclassname">histoprep.preprocess.functional.utils.</code><code class="sig-name descname">RGB_quantiles</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>numpy.ndarray<span class="p">, </span>PIL.Image.Image<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">gray</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>numpy.ndarray<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">quantiles</span><span class="p">:</span> <span class="n">List<span class="p">[</span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">[0.01, 0.05, 0.1, 0.25, 0.5, 0.75, 0.9, 0.95, 0.99]</span></em>, <em class="sig-param"><span class="n">mask</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>numpy.ndarray<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">resize</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">threshold</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Dict<span class="p">[</span>int<span class="p">, </span>int<span class="p">]</span><a class="reference internal" href="../_modules/histoprep/preprocess/functional/utils.html#RGB_quantiles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#histoprep.preprocess.functional.utils.RGB_quantiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Color channel quantiles.</p>
<p>Useful in the detection of misclassified tissue and artifacts.</p>
<dl class="simple">
<dt>Arguments:</dt><dd><dl class="simple">
<dt>image: </dt><dd><p>Input image.</p>
</dd>
<dt>mask: </dt><dd><p>Tissue mask for the input image. Will be generated if not defined.</p>
</dd>
<dt>quantiles: </dt><dd><p>The quantiles  of color channel values for tissue areas.</p>
</dd>
<dt>resize: </dt><dd><p>Resize the image to resize x resize. The function can become 
really slow with large images, in these situations just use this
option.</p>
</dd>
<dt>threshold: </dt><dd><p>For tissue_mask() function. Ignored if mask is defined.</p>
</dd>
</dl>
</dd>
<dt>Return:</dt><dd><dl class="simple">
<dt>dict: A dictionary of the quantiles of color channel values for tissue </dt><dd><p>areas.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="histoprep.preprocess.functional.utils.array_to_PIL">
<code class="sig-prename descclassname">histoprep.preprocess.functional.utils.</code><code class="sig-name descname">array_to_PIL</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em><span class="sig-paren">)</span> &#x2192; PIL.Image.Image<a class="reference internal" href="../_modules/histoprep/preprocess/functional/utils.html#array_to_PIL"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#histoprep.preprocess.functional.utils.array_to_PIL" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert numpy array to Pillow Image.</p>
</dd></dl>

<dl class="py function">
<dt id="histoprep.preprocess.functional.utils.data_loss">
<code class="sig-prename descclassname">histoprep.preprocess.functional.utils.</code><code class="sig-name descname">data_loss</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>numpy.ndarray<span class="p">, </span>PIL.Image.Image<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Dict<span class="p">[</span>float<span class="p">, </span>float<span class="p">]</span><a class="reference internal" href="../_modules/histoprep/preprocess/functional/utils.html#data_loss"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#histoprep.preprocess.functional.utils.data_loss" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect data loss.</p>
<dl class="simple">
<dt>Arguments:</dt><dd><p>image: Input image.</p>
</dd>
<dt>Return:</dt><dd><p>dict: Percentage of completely black (0) and white (255) pixels.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="histoprep.preprocess.functional.utils.mask_to_PIL">
<code class="sig-prename descclassname">histoprep.preprocess.functional.utils.</code><code class="sig-name descname">mask_to_PIL</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mask</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em><span class="sig-paren">)</span> &#x2192; PIL.Image.Image<a class="reference internal" href="../_modules/histoprep/preprocess/functional/utils.html#mask_to_PIL"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#histoprep.preprocess.functional.utils.mask_to_PIL" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize a numpy mask between 0 and 255 and convert to PIL image.</p>
</dd></dl>

<dl class="py function">
<dt id="histoprep.preprocess.functional.utils.preprocess">
<code class="sig-prename descclassname">histoprep.preprocess.functional.utils.</code><code class="sig-name descname">preprocess</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>numpy.ndarray<span class="p">, </span>PIL.Image.Image<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">threshold</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">resize</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">64</span></em>, <em class="sig-param"><span class="n">quantiles</span><span class="p">:</span> <span class="n">List<span class="p">[</span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">[0.01, 0.05, 0.1, 0.25, 0.5, 0.75, 0.9, 0.95, 0.99]</span></em>, <em class="sig-param"><span class="n">reduction</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">['max', 'median', 'mean', 'min']</span></em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/histoprep/preprocess/functional/utils.html#preprocess"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#histoprep.preprocess.functional.utils.preprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Preprocessing metrics for a histological image.</p>
<dl class="simple">
<dt>Arguments:</dt><dd><dl class="simple">
<dt>image: </dt><dd><p>Image to be preprocessed</p>
</dd>
<dt>threshold: </dt><dd><p>If not defined Otsu’s binarization will be used (which) may
fail for images with data loss or only background.</p>
</dd>
<dt>resize: </dt><dd><p>For artifact() function (it’s slow as fuck if tiles are not resized
to 64x64).</p>
</dd>
<dt>quantiles: </dt><dd><p>For artifact() function.</p>
</dd>
<dt>reduction: </dt><dd><p>For sharpness() function.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="histoprep.preprocess.functional.utils.sharpness">
<code class="sig-prename descclassname">histoprep.preprocess.functional.utils.</code><code class="sig-name descname">sharpness</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>numpy.ndarray<span class="p">, </span>PIL.Image.Image<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">divider</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">2</span></em>, <em class="sig-param"><span class="n">reduction</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">'max'</span></em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="../_modules/histoprep/preprocess/functional/utils.html#sharpness"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#histoprep.preprocess.functional.utils.sharpness" title="Permalink to this definition">¶</a></dt>
<dd><p>Sharpness detection with Laplacian variance.</p>
<dl class="simple">
<dt>Arguments:</dt><dd><dl class="simple">
<dt>image: </dt><dd><p>Input image.</p>
</dd>
<dt>divider: </dt><dd><p>Divider argument for the sliding_window() function. Window size
is defined as min(heigh,width)/divider</p>
</dd>
<dt>reduction: </dt><dd><p>Reduction method(s) for the Laplacian variance values for 
each window.</p>
</dd>
</dl>
</dd>
<dt>Return:</dt><dd><p>dict: Sharpness values for each defined reduction method.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="histoprep.preprocess.functional.utils.sliding_window">
<code class="sig-prename descclassname">histoprep.preprocess.functional.utils.</code><code class="sig-name descname">sliding_window</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>numpy.ndarray<span class="p">, </span>PIL.Image.Image<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">divider</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">2</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>numpy.ndarray<span class="p">]</span><a class="reference internal" href="../_modules/histoprep/preprocess/functional/utils.html#sliding_window"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#histoprep.preprocess.functional.utils.sliding_window" title="Permalink to this definition">¶</a></dt>
<dd><p>Sliding window with 0.5 overlap.</p>
<dl>
<dt>Arguments:</dt><dd><dl>
<dt>image: </dt><dd><p>Input image.</p>
</dd>
<dt>divider: </dt><dd><p>Window size is defined as min(height,width)/divider.
For square images, divider values will produce:</p>
<blockquote>
<div><p>1: original image
2: 3x3=9 windows
3: 5x5=25 windows
4: 7x7=49 windows
…</p>
</div></blockquote>
</dd>
</dl>
</dd>
<dt>Return:</dt><dd><p>list: List of window images as numpy arrays.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="histoprep.preprocess.functional.utils.tissue_mask">
<code class="sig-prename descclassname">histoprep.preprocess.functional.utils.</code><code class="sig-name descname">tissue_mask</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>numpy.ndarray<span class="p">, </span>PIL.Image.Image<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">threshold</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">blur_kernel</span><span class="p">:</span> <span class="n">Tuple<span class="p">[</span>int<span class="p">, </span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">(5, 5)</span></em>, <em class="sig-param"><span class="n">blur_iterations</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em>, <em class="sig-param"><span class="n">return_threshold</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="reference internal" href="../_modules/histoprep/preprocess/functional/utils.html#tissue_mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#histoprep.preprocess.functional.utils.tissue_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a tissue mask for image.</p>
<dl class="simple">
<dt>Arguments:</dt><dd><dl class="simple">
<dt>image: </dt><dd><p>Input image.</p>
</dd>
<dt>threshold: </dt><dd><p>Threshold for tissue detection (see the method explanation below).</p>
</dd>
<dt>blur_kernel: </dt><dd><p>Kernel to be used in Gaussian Blur. Set to None to disable.</p>
</dd>
<dt>blur_iterations: </dt><dd><p>How many iterations to blur with kernel.</p>
</dd>
<dt>return_threshold: </dt><dd><p>Whether to return the used threshold in the case of Otsu’s method.</p>
</dd>
</dl>
</dd>
<dt>Return:</dt><dd><p>np.ndarray: A tissue mask with 1 incidating tissue.</p>
</dd>
</dl>
<p>Two methods are implemented.</p>
<dl class="simple">
<dt>Otsu’s binarization:</dt><dd><p>Otsu’s method is used to find an optimal threshold by minimizing the 
weighted within-class variance. Due to this, a relatively high 
threshold for tissue detection is often selected and actual tissue
is misclassified as background. Binarization is also forced even for 
tiles with only background, causing the detection of non-existent 
tissue.</p>
</dd>
<dt>Adaptive gaussian thresholding:</dt><dd><p>Requires a threshold to be given but performs better than Otsu’s method.
This is automatically implemented if a threshold is given.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-histoprep.preprocess.functional">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-histoprep.preprocess.functional" title="Permalink to this headline">¶</a></h2>
</div>
</div>


             </article>
             
            </div>
            <footer>
  

  <hr>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, Jopo666.

    </p>
  </div>
    
      <div>
        Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
      </div>
     

</footer>

          </div>
        </div>

        <div class="catalyst-content-right" id="catalyst-content-right">
          <div class="catalyst-right-menu" id="catalyst-right-menu">
            <div class="catalyst-side-scroll" id="catalyst-side-scroll-right">
              <ul>
<li><a class="reference internal" href="#">histoprep.preprocess.functional package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-histoprep.preprocess.functional.utils">histoprep.preprocess.functional.utils module</a></li>
<li><a class="reference internal" href="#module-histoprep.preprocess.functional">Module contents</a></li>
</ul>
</li>
</ul>

            </div>
          </div>
        </div>
      </section>
    </div>

  


  

     
       <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
         <script src="../_static/jquery.js"></script>
         <script src="../_static/underscore.js"></script>
         <script src="../_static/doctools.js"></script>
     

  

  <script type="text/javascript" src="../_static/js/vendor/popper.min.js"></script>
  <script type="text/javascript" src="../_static/js/vendor/bootstrap.min.js"></script>
  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

  <!-- Begin Footer -->

  <footer class="site-footer" id="site-footer">
    <div class="container footer-container">
      <div class="footer-logo-wrapper">
        <a href="https://catalyst-team.com/" class="footer-logo"></a>
      </div>

      <div class="footer-links-wrapper">
        <div class="footer-links-col">
          <ul>
            <li class="list-title"><a href="https://github.com/catalyst-team">Ecosystem</a></li>
            <li><a class="nav-dropdown-item" href="https://alchemy.host">Alchemy</a></li>
            <li><a class="nav-dropdown-item" href="https://github.com/catalyst-team/catalyst">Catalyst</a></li>
            <li><a class="nav-dropdown-item" href="https://github.com/catalyst-team/reaction">Reaction</a></li>
          </ul>
        </div>

        <div class="footer-links-col">
          <ul>
            <li class="list-title"><a href="https://github.com/catalyst-team">Projects</a></li>
            <li><a class="nav-dropdown-item" href="https://github.com/catalyst-team/codestyle">Codestyle</a></li>
            <li><a class="nav-dropdown-item" href="https://github.com/catalyst-team/neuro">Catalyst.Neuro</a></li>
            <li><a class="nav-dropdown-item" href="https://github.com/catalyst-team/classification">Classification</a></li>
            <li><a class="nav-dropdown-item" href="https://github.com/catalyst-team/detection">Detection</a></li>
            <li><a class="nav-dropdown-item" href="https://github.com/catalyst-team/segmentation">Segmentation</a></li>
            <li><a class="nav-dropdown-item" href="https://github.com/catalyst-team/gan">Catalyst.GAN</a></li>
          </ul>
        </div>

        <div class="footer-links-col">
          <ul>
            <li class="list-title"><a href="https://catalyst-team.com/">Support</a></li>
            <li><a href="https://github.com/catalyst-team/catalyst/issues" target="_blank">Github Issues</a></li>
            <li><a href="https://github.com/catalyst-team/catalyst/blob/master/CONTRIBUTING.md" target="_blank">Contributing</a></li>
            <li><a href="https://www.patreon.com/catalyst_team" target="_blank">Patreon</a></li>
          </ul>
        </div>

        <div class="footer-links-col follow-us-col">
          <div class="footer-social-icons">
            <a href="https://t.me/catalyst_team" target="_blank" class="telegram"></a>
            <a href="https://twitter.com/catalyst_core" target="_blank" class="twitter"></a>
            <a href="https://join.slack.com/t/catalyst-team-core/shared_invite/zt-d9miirnn-z86oKDzFMKlMG4fgFdZafw" target="_blank" class="ods"></a>
          </div>
        </div>
      </div>
    </div>
  </footer>


  <!-- End Footer -->

  <!-- Begin Mobile Menu -->

  <div class="mobile-main-menu">
    <div class="container-fluid">
      <div class="container">
        <div class="mobile-main-menu-header-container">
          <a class="header-logo" href="https://catalyst-team.com/" aria-label="Catalyst"></a>
          <a class="main-menu-close-button" href="#" data-behavior="close-mobile-menu"></a>
        </div>
      </div>
    </div>

    <div class="mobile-main-menu-links-container">
      <div class="main-menu">
        <ul>
          <li>
            <a href="">Get Started</a>
          </li>

          <li>
            <a href="https://github.com/catalyst-team/catalyst">Github</a>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- End Mobile Menu -->

  <script type="text/javascript" src="../_static/js/vendor/anchor.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      mobileMenu.bind();
      mobileTOC.bind();
      catalystAnchors.bind();
      sideMenus.bind();
      scrollToAnchor.bind();
      highlightNavigation.bind();
      mainMenuDropdown.bind();

      // Add class to links that have code blocks, since we cannot create links in code blocks
      $("article.catalyst-article a span.pre").each(function(e) {
        $(this).closest("a").addClass("has-code");
      });
    })
  </script>
</body>
</html>