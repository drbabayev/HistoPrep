<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://jopo666.github.io/histoprep/api/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>histoprep - HistoPrep</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="//use.fontawesome.com/releases/v5.8.1/css/all.css" rel="stylesheet" />
        <link href="//use.fontawesome.com/releases/v5.8.1/css/v4-shims.css" rel="stylesheet" />
        <link href="../css/mkapi-common.css" rel="stylesheet" />
        <link href="../css/mkapi-readthedocs.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "histoprep";
        var mkdocs_page_input_path = "api.md";
        var mkdocs_page_url = "/histoprep/api/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> HistoPrep
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">About</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../about/install/">Install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../about/license/">License</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../about/release_notes/">Release notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../about/citation/">Citation</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Examples</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../examples/read_slides/read_slides/">Reading slides</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../examples/cut_tiles/cut_tiles/">Saving tiles</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../examples/dearray/dearray/">Dearraying TMA slides</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../examples/preprocess/preprocess/">Preprocessing saved tile images</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../examples/panda/panda/">Use case: PANDA dataset</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API documentation</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">histoprep</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#histoprep_reader_readerslidereader">SlideReader</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#histoprep_reader_readerslidereaderread_region">read_region</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprep_reader_readerslidereaderget_thumbnail">get_thumbnail</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprep_reader_readerslidereaderdetect_tissue">detect_tissue</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprep_reader_readerslidereaderget_tile_coordinates">get_tile_coordinates</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprep_reader_readerslidereaderdearray">dearray</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprep_reader_readerslidereadersave_spots">save_spots</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprep_reader_readerslidereadersave_tiles">save_tiles</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#histoprep_outliers_detectoutlierdetector">OutlierDetector</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#histoprep_outliers_detectoutlierdetectorplot_clusters">plot_clusters</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprep_outliers_detectoutlierdetectorplot_cluster">plot_cluster</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprep_outliers_detectoutlierdetectorumap_representation">umap_representation</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprep_outliers_detectoutlierdetectorpca_representation">pca_representation</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprep_outliers_detectoutlierdetectorplot_representation">plot_representation</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#histoprep_outliers_visualizeoutliervisualizer">OutlierVisualizer</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#histoprep_outliers_visualizeoutliervisualizerplot_rgb_mean">plot_rgb_mean</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprep_outliers_visualizeoutliervisualizerplot_rgb_std">plot_rgb_std</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprep_outliers_visualizeoutliervisualizerplot_hsv_mean">plot_hsv_mean</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprep_outliers_visualizeoutliervisualizerplot_hsv_std">plot_hsv_std</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprep_outliers_visualizeoutliervisualizerplot_rgb_quantiles">plot_rgb_quantiles</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprep_outliers_visualizeoutliervisualizerplot_hsv_quantiles">plot_hsv_quantiles</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprep_outliers_visualizeoutliervisualizerplot_histogram_with_examples">plot_histogram_with_examples</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#histoprepfunctional">functional</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#histoprepfunctional_preprocesspreprocessmetrics">PreprocessMetrics</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#histoprepfunctional_preprocesspreprocessmetricscall">call</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprepfunctional_helpersarr2pil">arr2pil</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprepfunctional_preprocesschannel_quantiles">channel_quantiles</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprepfunctional_preprocesschannel_std">channel_std</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprepfunctional_preprocessdata_loss">data_loss</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprepfunctional_dearraydearray">dearray</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprepfunctional_tissuedetect_tissue">detect_tissue</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprepfunctional_helpersdownsample_image">downsample_image</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprepfunctional_coordinatesfilter_coordinates">filter_coordinates</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprepfunctional_helpersresize_image">resize_image</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprepfunctional_helpersrgb2gray">rgb2gray</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprepfunctional_helpersrgb2hsv">rgb2hsv</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprepfunctional_preprocesssharpness">sharpness</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprepfunctional_coordinatestile_coordinates">tile_coordinates</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#histoprephelpers">helpers</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#histoprephelpers_metadatacombine_metadata">combine_metadata</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprephelpers_multiprocessmultiprocess_loop">multiprocess_loop</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprephelpers_verboseprogress_bar">progress_bar</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprephelpers_visualizerandom_tile_collage">random_tile_collage</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprephelpers_ioread_image">read_image</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprephelpers_filesremove_directory">remove_directory</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprephelpers_metadatarename_paths">rename_paths</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#histoprephelpers_metadatastrip_metric_colums">strip_metric_colums</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">HistoPrep</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>API documentation &raquo;</li><li>histoprep</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div class="mkapi-node" id="histoprep">
<div class='mkapi-object-container'>
  <div class="mkapi-object package plain top">
    <div class="mkapi-object-kind package top">package</div>
    <h1 id="histoprep" class="mkapi-object-body package top"><span class="mkapi-object-name">histoprep</span></h1>
  </div>
  
</div>


</div>

<div class="mkapi-node" id="histoprep._reader._reader.SlideReader">
<div class='mkapi-object-container'>
  <div class="mkapi-object class code top">
    <div class="mkapi-object-kind class top">class</div>
    <h2 id="histoprep_reader_readerslidereader" class="mkapi-object-body class top"><code class="mkapi-object-name">SlideReader</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">path</code>, <code class="mkapi-object-signature">verbose=False</code>, <code class="mkapi-object-signature">preferred_dimension=4096</code>, <code class="mkapi-object-signature">threshold=None</code>, <code class="mkapi-object-signature">threshold_multiplier=1.05</code>, <code class="mkapi-object-signature">max_dimension=16384</code><code class="mkapi-object-parenthesis">)</code></h2>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Reader for large slide images with extended functionality such as
tissue detection, tile coordinate extraction, dearraying TMA spots and
saving tiles.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">path</code>
<span class="mkapi-item-type">(str)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Path to slide image.</span></li>

<li><code class="mkapi-item-name">verbose</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Set to True to get verbose output. Defaults to False.</span></li>

<li><code class="mkapi-item-name">preferred_dimension</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Preferred maximum dimension for the for the
generated thumbnail. Defaults to 4096.</span></li>

<li><code class="mkapi-item-name">threshold</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Treshold for tissue detection. If set, will detect tissue
by global thresholding, and otherwise Otsu's method is used to
find a threshold. Defaults to None.</span></li>

<li><code class="mkapi-item-name">threshold_multiplier</code>
<span class="mkapi-item-type">(float, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Otsu's method is used to find an optimal
threshold by minimizing the weighted within-class variance. This
threshold is then multiplied with <code>threshold_multiplier</code>. Used
only if <code>threshold</code> is None. Defaults to 1.05.</span></li>

<li><code class="mkapi-item-name">max_dimension</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Maximum dimension for the generated thumbnail.
Smaller thumbnails are preferred, but in the absence of these,
the first level with all dimensions less than <code>max_dimension</code>
is chosen. Defaults to 16_384.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section attributes">
      <div class="mkapi-section-name attributes">
          <span class="mkapi-section-name-body attributes">Attributes</span> 
        </div>
      <div class="mkapi-section-body attributes"><ul class="mkapi-items">
<li class="readonly-property"><code class="mkapi-item-name">annotated_thumbnail_spots</code>
<span class="mkapi-item-type">(Image)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Thumbnail image annotated with the spot coordinates.</span></li>

<li class="readonly-property"><code class="mkapi-item-name">annotated_thumbnail_tiles</code>
<span class="mkapi-item-type">(Image)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Thumbnail image annotated with the tile coordinates.</span></li>

<li class="readonly-property"><code class="mkapi-item-name">dimensions</code>
<span class="mkapi-item-type">(int, int)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Slide image dimensions.</span></li>

<li class="readonly-property"><code class="mkapi-item-name">level_dimensions</code>
<span class="mkapi-item-type">(dict(int: (int, int)))</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Downsamples for each level.</span></li>

<li class="readonly-property"><code class="mkapi-item-name">level_downsamples</code>
<span class="mkapi-item-type">(dict(int: (float, float)))</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Dimensions for each level.</span></li>

<li class="readonly-property"><code class="mkapi-item-name">spot_mask</code>
<span class="mkapi-item-type">(Image)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">TMA spot mask (0=background, 1=spot).</span></li>

<li class="readonly-property"><code class="mkapi-item-name">spot_metadata</code>
<span class="mkapi-item-type">(Image)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Metadata for TMA spots.</span></li>

<li class="readonly-property"><code class="mkapi-item-name">thumbnail</code>
<span class="mkapi-item-type">(Image)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Thumbnail image of the slide.</span></li>

<li class="readonly-property"><code class="mkapi-item-name">thumbnail_downsample</code>
<span class="mkapi-item-type">(Image)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Downsample for the thumbnail image.</span></li>

<li class="readonly-property"><code class="mkapi-item-name">tile_metadata</code>
<span class="mkapi-item-type">(Image)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Metadata for saved tiles.</span></li>

<li class="readonly-property"><code class="mkapi-item-name">tissue_mask</code>
<span class="mkapi-item-type">(Image)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Tissue mask (0=background, 1=tissue).</span></li>

<li class="readonly-property"><code class="mkapi-item-name">tissue_threshold</code>
<span class="mkapi-item-type">(int)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Threshold for tissue detection.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section raises">
      <div class="mkapi-section-name raises">
          <span class="mkapi-section-name-body raises">Raises</span> 
        </div>
      <div class="mkapi-section-body raises"><ul class="mkapi-items">
<li><code class="mkapi-item-name">FileNotFoundError</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">File not found.</span></li>

<li><code class="mkapi-item-name">IOError</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">File not readable by HistoPrep.</span></li>

<li><code class="mkapi-item-name">NotADirectoryError</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Scratch directory exists, but isn't a directory.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section">
      <div class="mkapi-section-body"><p>Usage:</p>
<pre><code class="language-python">from histoprep import SlideReader

# Load tile images.
reader = SlideReader(&quot;/path/to/slide.tiff&quot;)
thumbnail = reader.get_thumbnail()
thresh, tissue_mask = reader.detect_tissue()
coords = reader.get_tile_coordinates(
    width=512, overlap=0.1, tissue_mask=tissue_mask
)
tiles = [reader.read_region(xywh) for xywh in coords]
</code></pre></div>
    </div>
  <div class="mkapi-section methods">
      <div class="mkapi-section-name methods">
          <span class="mkapi-section-name-body methods">Methods</span> 
        </div>
      <div class="mkapi-section-body methods"><ul class="mkapi-items">
<li class="method"><code class="mkapi-item-name"><a href="#histoprep._reader._reader.SlideReader.dearray">dearray</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">kernel_size</code>, <code class="mkapi-object-signature">iterations</code>, <code class="mkapi-object-signature">min_area</code>, <code class="mkapi-object-signature">max_area</code><code class="mkapi-object-parenthesis">)</code>
<span class="mkapi-item-type">(DataFrame)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Dearray TMA spots.</span></li>

<li class="method"><code class="mkapi-item-name"><a href="#histoprep._reader._reader.SlideReader.detect_tissue">detect_tissue</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">threshold</code>, <code class="mkapi-object-signature">multiplier</code>, <code class="mkapi-object-signature">sigma</code>, <code class="mkapi-object-signature">remove_white</code><code class="mkapi-object-parenthesis">)</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Detect tissue from slide image.</span></li>

<li class="method"><code class="mkapi-item-name"><a href="#histoprep._reader._reader.SlideReader.get_thumbnail">get_thumbnail</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">preferred_dimension</code>, <code class="mkapi-object-signature">level</code>, <code class="mkapi-object-signature">return_arr</code>, <code class="mkapi-object-signature">fill</code>, <code class="mkapi-object-signature">return_level</code><code class="mkapi-object-parenthesis">)</code>
<span class="mkapi-item-type">(ndarray or Image)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Get thumbnail image of the slide.</span></li>

<li class="method"><code class="mkapi-item-name"><a href="#histoprep._reader._reader.SlideReader.get_tile_coordinates">get_tile_coordinates</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">width</code>, <code class="mkapi-object-signature">overlap</code>, <code class="mkapi-object-signature">height</code>, <code class="mkapi-object-signature">level</code>, <code class="mkapi-object-signature">tissue_mask</code>, <code class="mkapi-object-signature">max_background</code><code class="mkapi-object-parenthesis">)</code>
<span class="mkapi-item-type">(list of (int, int, int, int))</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Get tile coordinates for the slide.</span></li>

<li class="method"><code class="mkapi-item-name"><a href="#histoprep._reader._reader.SlideReader.read_region">read_region</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">xywh</code>, <code class="mkapi-object-signature">level</code>, <code class="mkapi-object-signature">return_arr</code>, <code class="mkapi-object-signature">fill</code><code class="mkapi-object-parenthesis">)</code>
<span class="mkapi-item-type">(Image or ndarray)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Read region from slide.</span></li>

<li class="method"><code class="mkapi-item-name"><a href="#histoprep._reader._reader.SlideReader.save_spots">save_spots</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">output_dir</code>, <code class="mkapi-object-signature">overwrite</code>, <code class="mkapi-object-signature">image_format</code>, <code class="mkapi-object-signature">quality</code>, <code class="mkapi-object-signature">num_workers</code>, <code class="mkapi-object-signature">num_retries</code>, <code class="mkapi-object-signature">display_progress</code><code class="mkapi-object-parenthesis">)</code>
<span class="mkapi-item-type">(DataFrame)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Save TMA spot images from a slide.</span></li>

<li class="method"><code class="mkapi-item-name"><a href="#histoprep._reader._reader.SlideReader.save_tiles">save_tiles</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">output_dir</code>, <code class="mkapi-object-signature">coordinates</code>, <code class="mkapi-object-signature">level</code>, <code class="mkapi-object-signature">preprocess_metrics</code>, <code class="mkapi-object-signature">overwrite</code>, <code class="mkapi-object-signature">image_format</code>, <code class="mkapi-object-signature">quality</code>, <code class="mkapi-object-signature">num_workers</code>, <code class="mkapi-object-signature">num_retries</code>, <code class="mkapi-object-signature">display_progress</code><code class="mkapi-object-parenthesis">)</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Save tile images from a slide.</span></li>


</ul></div>
    </div>
  </div>

  <div class="mkapi-members">
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep._reader._reader.SlideReader.read_region">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h3 id="histoprep_reader_readerslidereaderread_region" class="mkapi-object-body method"><code class="mkapi-object-name">read_region</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">xywh</code>, <code class="mkapi-object-signature">level=0</code>, <code class="mkapi-object-signature">return_arr=False</code>, <code class="mkapi-object-signature">fill=255</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Read region from slide.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">xywh</code>
<span class="mkapi-item-type">(int, int, int, int)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Region defined by X, Y, width and height.</span></li>


<li><code class="mkapi-item-name">return_arr</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Return region as an uint8 array instead of a Pil image.
Defaults to False.</span></li>

<li><code class="mkapi-item-name">fill</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Fill overbound areas with this value. If None, raises an error
when the region goes out of bounds. Defaults to 255.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section raises">
      <div class="mkapi-section-name raises">
          <span class="mkapi-section-name-body raises">Raises</span> 
        </div>
      <div class="mkapi-section-body raises"><ul class="mkapi-items">
<li><code class="mkapi-item-name">ValueError</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">XYWH, level or fill are not integers.</span></li>

<li><code class="mkapi-item-name">ValueError</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Negative coordinates.</span></li>

<li><code class="mkapi-item-name">ValueError</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Width or height less than 1.</span></li>

<li><code class="mkapi-item-name">ValueError</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Region overbound without a fill value.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(Image or ndarray)</span>
        </div>
      <div class="mkapi-section-body returns"><p>Image of the region.</p></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">from histoprep import SlideReader

slide = SlideReader(&quot;/path/to/slide.tiff&quot;)
tile_image = slide.read_region(x=0, y=0, w=1024, h=1024)
</code></pre></div>
    </div>
  </div>

</div>
    </div>
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep._reader._reader.SlideReader.get_thumbnail">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h3 id="histoprep_reader_readerslidereaderget_thumbnail" class="mkapi-object-body method"><code class="mkapi-object-name">get_thumbnail</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">preferred_dimension=4096</code>, <code class="mkapi-object-signature">level=None</code>, <code class="mkapi-object-signature">return_arr=False</code>, <code class="mkapi-object-signature">fill=255</code>, <code class="mkapi-object-signature">return_level=False</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Get thumbnail image of the slide.</p>
<p>Running this method updates the <code>thumbnail</code> attribute.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">preferred_dimension</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Selects the first level which has both
dimensions smaller than <code>preferred_dimension</code>. If not found,
selects the smallest thumbnail with all dimensions less than
<code>MAX_DIMENSION</code> attribute. Defaults to 4096.</span></li>

<li><code class="mkapi-item-name">level</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Overwrites max_dimension and loads a specific level. Defaults
to None.</span></li>

<li><code class="mkapi-item-name">return_arr</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Return an uint8 array instead of PIL Image. Defaults to
False.</span></li>

<li><code class="mkapi-item-name">fill</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Fill out of bounds regions. Defaults to 255.</span></li>

<li><code class="mkapi-item-name">return_level</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Return the thumbnail level. Defaults to False.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section raises">
      <div class="mkapi-section-name raises">
          <span class="mkapi-section-name-body raises">Raises</span> 
        </div>
      <div class="mkapi-section-body raises"><ul class="mkapi-items">
<li><code class="mkapi-item-name">ValueError</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">No levels with dimensions less than <code>MAX_DIMENSION</code>.</span></li>

<li><code class="mkapi-item-name">ValueError</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Level does not exist.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(ndarray or Image)</span>
        </div>
      <div class="mkapi-section-body returns"><p>Thumbnail image.</p></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">from histoprep import SlideReader

reader = Slidereader(&quot;/path/to/slide.tiff&quot;)
thumbnail = reader.get_thumbnail()
</code></pre></div>
    </div>
  </div>

</div>
    </div>
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep._reader._reader.SlideReader.detect_tissue">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h3 id="histoprep_reader_readerslidereaderdetect_tissue" class="mkapi-object-body method"><code class="mkapi-object-name">detect_tissue</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">threshold=None</code>, <code class="mkapi-object-signature">multiplier=1.05</code>, <code class="mkapi-object-signature">sigma=1.0</code>, <code class="mkapi-object-signature">remove_white=True</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Detect tissue from slide image.</p>
<p>Running this method updates the <code>tissue_mask</code> attribute.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">threshold</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Treshold for tissue detection. If set, will detect tissue
by global thresholding, and otherwise Otsu's method is used to
find a threshold. Defaults to None.</span></li>

<li><code class="mkapi-item-name">multiplier</code>
<span class="mkapi-item-type">(float, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Otsu's method is used to find an optimal threshold by
minimizing the weighted within-class variance. This threshold is
then multiplied with <code>multiplier</code>. Used only if <code>threshold</code> is
None. Defaults to 1.0.</span></li>

<li><code class="mkapi-item-name">sigma</code>
<span class="mkapi-item-type">(float, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Sigma for gaussian blurring. Defaults to 1.05.</span></li>

<li><code class="mkapi-item-name">remove_white</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Changes completely white regions to the second highest
pixel value, before detecting background. This way Otsu's method
isn't affected by possibly extreme white areas. Defaults to
True.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> 
        </div>
      <div class="mkapi-section-body returns"><p>Binary mask with 0=background and 1=tissue.</p></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">from histoprep import SlideReader

reader = SlideReader(&quot;path/to/slide&quot;)
thresh, tissue_mask = reader.detect_tissue()
</code></pre></div>
    </div>
  </div>

</div>
    </div>
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep._reader._reader.SlideReader.get_tile_coordinates">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h3 id="histoprep_reader_readerslidereaderget_tile_coordinates" class="mkapi-object-body method"><code class="mkapi-object-name">get_tile_coordinates</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">width</code>, <code class="mkapi-object-signature">overlap=0.0</code>, <code class="mkapi-object-signature">height=None</code>, <code class="mkapi-object-signature">level=0</code>, <code class="mkapi-object-signature">tissue_mask=None</code>, <code class="mkapi-object-signature">max_background=0.95</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Get tile coordinates for the slide.</p>
<p>Divides the slide into tiles based on width, height and overlap. These
tiles are then filtered based on the amount of background. Running this
method updates the <code>annotated_thumbnail_tiles</code> attribute.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">width</code>
<span class="mkapi-item-type">(int)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Tile width.</span></li>

<li><code class="mkapi-item-name">overlap</code>
<span class="mkapi-item-type">(float, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Overlap between neighbouring tiles. Defaults to 0.0.</span></li>

<li><code class="mkapi-item-name">height</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Height of a tile. If None, will be set to width. Defaults to
None.</span></li>

<li><code class="mkapi-item-name">level</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Slide level for calculating tile coordinates. Defaults to 0.</span></li>

<li><code class="mkapi-item-name">tissue_mask</code>
<span class="mkapi-item-type">(ndarray, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Tissue mask. If None, uses a cached tissue mask.
Defaults to None.</span></li>

<li><code class="mkapi-item-name">max_background</code>
<span class="mkapi-item-type">(float, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Maximum amount of background in tile. Defaults to
0.95.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(list of (int, int, int, int))</span>
        </div>
      <div class="mkapi-section-body returns"><p>XYWH coordinates for each tile.</p></div>
    </div>
  </div>

</div>
    </div>
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep._reader._reader.SlideReader.dearray">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h3 id="histoprep_reader_readerslidereaderdearray" class="mkapi-object-body method"><code class="mkapi-object-name">dearray</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">kernel_size=5</code>, <code class="mkapi-object-signature">iterations=3</code>, <code class="mkapi-object-signature">min_area=0.25</code>, <code class="mkapi-object-signature">max_area=3.0</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Dearray TMA spots.</p>
<p>Running this method updates the <code>annotated_thumbnail_spots</code> and
<code>spot_mask</code> attributes.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">kernel_size</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Kernel size for dilate. Defaults to 5.</span></li>

<li><code class="mkapi-item-name">iterations</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Dilate iterations. Defaults to 3.</span></li>

<li><code class="mkapi-item-name">min_area</code>
<span class="mkapi-item-type">(float, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Minimum area for a spot. Defaults to 0.1 and calculated
with: <code>median(areas) * min_area</code></span></li>

<li><code class="mkapi-item-name">max_area</code>
<span class="mkapi-item-type">(float, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Maximum area for a spot. Similar to min_area. Defaults to
3.0.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(DataFrame)</span>
        </div>
      <div class="mkapi-section-body returns"><p>Spot metadata.</p></div>
    </div>
  </div>

</div>
    </div>
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep._reader._reader.SlideReader.save_spots">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h3 id="histoprep_reader_readerslidereadersave_spots" class="mkapi-object-body method"><code class="mkapi-object-name">save_spots</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">output_dir</code>, <code class="mkapi-object-signature">overwrite=False</code>, <code class="mkapi-object-signature">image_format=&#39;jpeg&#39;</code>, <code class="mkapi-object-signature">quality=95</code>, <code class="mkapi-object-signature">num_workers=20</code>, <code class="mkapi-object-signature">num_retries=10</code>, <code class="mkapi-object-signature">display_progress=True</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Save TMA spot images from a slide.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">output_dir</code>
<span class="mkapi-item-type">(str)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Output directory for the processed images.</span></li>

<li><code class="mkapi-item-name">overwrite</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Overwrite any existing images. Defaults to False.</span></li>

<li><code class="mkapi-item-name">image_format</code>
<span class="mkapi-item-type">(str, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Image format. Defaults to "jpeg".</span></li>

<li><code class="mkapi-item-name">quality</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Quality of JPEG compression. Defaults to 95.</span></li>

<li><code class="mkapi-item-name">num_workers</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of image saving workers. Defaults to the number
of CPU cores.</span></li>

<li><code class="mkapi-item-name">num_retries</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number retries loading any regions, which couldn't be
saved the first time. Defaults to 10.</span></li>

<li><code class="mkapi-item-name">display_progress</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Display progress bar. Defaults to True.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(DataFrame)</span>
        </div>
      <div class="mkapi-section-body returns"><p>Dataframe with spot bounding boxes.</p></div>
    </div>
  </div>

</div>
    </div>
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep._reader._reader.SlideReader.save_tiles">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h3 id="histoprep_reader_readerslidereadersave_tiles" class="mkapi-object-body method"><code class="mkapi-object-name">save_tiles</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">output_dir</code>, <code class="mkapi-object-signature">coordinates</code>, <code class="mkapi-object-signature">level=0</code>, <code class="mkapi-object-signature">preprocess_metrics=PreprocessMetrics(channel_resize=64, quantiles=[0.05, 0.1, 0.5, 0.9, 0.95], sharpness_reduce=max, custom_callback=None)</code>, <code class="mkapi-object-signature">overwrite=False</code>, <code class="mkapi-object-signature">image_format=&#39;jpeg&#39;</code>, <code class="mkapi-object-signature">quality=95</code>, <code class="mkapi-object-signature">num_workers=20</code>, <code class="mkapi-object-signature">num_retries=10</code>, <code class="mkapi-object-signature">display_progress=True</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Save tile images from a slide.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">output_dir</code>
<span class="mkapi-item-type">(str)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Output directory for the processed images.</span></li>

<li><code class="mkapi-item-name">coordinates</code>
<span class="mkapi-item-type">(list of (int, int, int, int))</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">A list of XYWH coordinates for the tile regions.
Can be easily created with the <code>SlideReader.get_tile_coordinates()</code>
method. <strong>Please note that the level used to create coordinates
should, match the <code>level</code> argument for this function.</strong></span></li>

<li><code class="mkapi-item-name">level</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Slide level to read tile images from. This should match the
level used to create the coordinates! Defaults to 0.</span></li>

<li><code class="mkapi-item-name">preprocess_metrics</code>
<span class="mkapi-item-type">(optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Any Callable which takes an image as an input
and returns a dictionary. It is recommended to use the
<code>histoprep.PreprocessMetrics</code> class, which can be modified with
custom functions. Defaults to <code>histoprep.PreprocessMetrics()</code>.</span></li>

<li><code class="mkapi-item-name">overwrite</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Overwrite any existing images. Defaults to False.</span></li>

<li><code class="mkapi-item-name">image_format</code>
<span class="mkapi-item-type">(str, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Image format. Defaults to "jpeg".</span></li>

<li><code class="mkapi-item-name">quality</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Quality of JPEG compression. Defaults to 95.</span></li>

<li><code class="mkapi-item-name">num_workers</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of image saving workers. Defaults to the number
of CPU cores.</span></li>

<li><code class="mkapi-item-name">num_retries</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number retries loading any regions, which couldn't be
saved the first time. Defaults to 10.</span></li>

<li><code class="mkapi-item-name">display_progress</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Display progress bar. Defaults to True.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> 
        </div>
      <div class="mkapi-section-body returns"><p>Tile metadata and preprocessing metrics.</p></div>
    </div>
  </div>

</div>
    </div>
  
  </div>

</div>

<div class="mkapi-node" id="histoprep._outliers._detect.OutlierDetector">
<div class='mkapi-object-container'>
  <div class="mkapi-object class code top">
    <div class="mkapi-object-kind class top">class</div>
    <h2 id="histoprep_outliers_detectoutlierdetector" class="mkapi-object-body class top"><code class="mkapi-object-name">OutlierDetector</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">metadata</code>, <code class="mkapi-object-signature">num_clusters=20</code>, <code class="mkapi-object-signature">batch_size=16384</code>, <code class="mkapi-object-signature">**kwargs</code><code class="mkapi-object-parenthesis">)</code></h2>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Automatic outlier detection from color channel quantile metrics.</p>
<p>Kmeans++ is used to cluster each tile into the desired number of
clusters. Clusters are ordered by the distance to the origo in
decreasing order, and thus the most likely outlier group is first and
last groups contain normal images.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">metadata</code>
<span class="mkapi-item-type">(DataFrame)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Metadata containing columns: <code>[channel_name]_q={quantile}</code></span></li>

<li><code class="mkapi-item-name">num_clusters</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of clusters. Defaults to 20.</span></li>

<li><code class="mkapi-item-name">batch_size</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Batch size for kmeans++. Defaults to 2**14.</span></li>



</ul></div>
    </div>
  <div class="mkapi-section attributes">
      <div class="mkapi-section-name attributes">
          <span class="mkapi-section-name-body attributes">Attributes</span> 
        </div>
      <div class="mkapi-section-body attributes"><ul class="mkapi-items">
<li class="readonly-property"><code class="mkapi-item-name">cluster_counts</code>
<span class="mkapi-item-type">(ndarray)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of members in each cluster.</span></li>

<li class="readonly-property"><code class="mkapi-item-name">cluster_distances</code>
<span class="mkapi-item-type">(ndarray)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Cluster mean euclidean distance to the origo.</span></li>

<li class="readonly-property"><code class="mkapi-item-name">clusters</code>
<span class="mkapi-item-type">(ndarray)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Cluster assignments.</span></li>

<li class="readonly-property"><code class="mkapi-item-name">metrics</code>
<span class="mkapi-item-type">(ndarray)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Quantile metrics normalised with: <code>(X - X.mean(0)) / X.std(0)</code></span></li>


</ul></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">import histoprep

detector = histoprep.OutlierDetector(metadata, num_clusters=20)
detect.plot_clusters(min_distance=10)
# From the plots we might see that clusters 0-3 contain outliers.
metadata[&quot;outlier&quot;] = False
metadata.loc[detector.clusters &lt; 4, &quot;outlier&quot;] = True
</code></pre></div>
    </div>
  <div class="mkapi-section methods">
      <div class="mkapi-section-name methods">
          <span class="mkapi-section-name-body methods">Methods</span> 
        </div>
      <div class="mkapi-section-body methods"><ul class="mkapi-items">
<li class="method"><code class="mkapi-item-name"><a href="#histoprep._outliers._detect.OutlierDetector.pca_representation">pca_representation</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">num_components</code>, <code class="mkapi-object-signature">max_samples</code>, <code class="mkapi-object-signature">**kwargs</code><code class="mkapi-object-parenthesis">)</code>
<span class="mkapi-item-type">(ndarray, ndarray)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Run princical component analysis (PCA) to get a representation of
metrics. Does not produce as nice results as UMAP, but it's faster and
supported out-of-the-box.</span></li>

<li class="method"><code class="mkapi-item-name"><a href="#histoprep._outliers._detect.OutlierDetector.plot_cluster">plot_cluster</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">cluster</code>, <code class="mkapi-object-signature">num_examples</code>, <code class="mkapi-object-signature">ncols</code>, <code class="mkapi-object-signature">px</code>, <code class="mkapi-object-signature">figsize</code><code class="mkapi-object-parenthesis">)</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Plot example images from a single cluster.</span></li>

<li class="method"><code class="mkapi-item-name"><a href="#histoprep._outliers._detect.OutlierDetector.plot_clusters">plot_clusters</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">min_distance</code>, <code class="mkapi-object-signature">num_examples</code>, <code class="mkapi-object-signature">ncols</code>, <code class="mkapi-object-signature">px</code>, <code class="mkapi-object-signature">figsize</code><code class="mkapi-object-parenthesis">)</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Plot example images from clusters.</span></li>

<li class="method"><code class="mkapi-item-name"><a href="#histoprep._outliers._detect.OutlierDetector.plot_representation">plot_representation</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">coordinates</code>, <code class="mkapi-object-signature">indices</code>, <code class="mkapi-object-signature">label_clusters</code>, <code class="mkapi-object-signature">size</code>, <code class="mkapi-object-signature">cmap</code>, <code class="mkapi-object-signature">figsize</code><code class="mkapi-object-parenthesis">)</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Plot representation of metrics.</span></li>

<li class="method"><code class="mkapi-item-name"><a href="#histoprep._outliers._detect.OutlierDetector.umap_representation">umap_representation</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">num_components</code>, <code class="mkapi-object-signature">num_neighbors</code>, <code class="mkapi-object-signature">metric</code>, <code class="mkapi-object-signature">max_samples</code>, <code class="mkapi-object-signature">verbose</code>, <code class="mkapi-object-signature">**kwargs</code><code class="mkapi-object-parenthesis">)</code>
<span class="mkapi-item-type">(ndarray, ndarray)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Run Uniform Manifold Approximation and Projection (UMAP)
dimensionality reduction.</span></li>


</ul></div>
    </div>
  </div>

  <div class="mkapi-members">
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep._outliers._detect.OutlierDetector.plot_clusters">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h3 id="histoprep_outliers_detectoutlierdetectorplot_clusters" class="mkapi-object-body method"><code class="mkapi-object-name">plot_clusters</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">min_distance=None</code>, <code class="mkapi-object-signature">num_examples=256</code>, <code class="mkapi-object-signature">ncols=32</code>, <code class="mkapi-object-signature">px=64</code>, <code class="mkapi-object-signature">figsize=(9.600000000000001, 4.8)</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Plot example images from clusters.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">min_distance</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Minimum distance to filter which groups to plot.
Defaults to None.</span></li>

<li><code class="mkapi-item-name">num_examples</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of example images from each group. Defaults to 256.</span></li>

<li><code class="mkapi-item-name">ncols</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of columns for plotting example images. Defaults to 32.</span></li>

<li><code class="mkapi-item-name">px</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Size of each example image. Defaults to 64.</span></li>

<li><code class="mkapi-item-name">figsize</code>
<span class="mkapi-item-type">(float, float), optional</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Figure size for plotting. Defaults to
(default_width * 1.5, default_height)</span></li>


</ul></div>
    </div>
  </div>

</div>
    </div>
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep._outliers._detect.OutlierDetector.plot_cluster">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h3 id="histoprep_outliers_detectoutlierdetectorplot_cluster" class="mkapi-object-body method"><code class="mkapi-object-name">plot_cluster</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">cluster=0</code>, <code class="mkapi-object-signature">num_examples=256</code>, <code class="mkapi-object-signature">ncols=32</code>, <code class="mkapi-object-signature">px=64</code>, <code class="mkapi-object-signature">figsize=(9.600000000000001, 4.8)</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Plot example images from a single cluster.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">cluster</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Cluster number. Defaults to 0.</span></li>

<li><code class="mkapi-item-name">num_examples</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of example images from each group. Defaults to 256.</span></li>

<li><code class="mkapi-item-name">ncols</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of columns for plotting example images. Defaults to 32.</span></li>

<li><code class="mkapi-item-name">px</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Size of each example image. Defaults to 64.</span></li>

<li><code class="mkapi-item-name">figsize</code>
<span class="mkapi-item-type">(float, float), optional</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Figure size for plotting. Defaults to
(default_width * 1.5, default_height)</span></li>


</ul></div>
    </div>
  </div>

</div>
    </div>
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep._outliers._detect.OutlierDetector.umap_representation">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h3 id="histoprep_outliers_detectoutlierdetectorumap_representation" class="mkapi-object-body method"><code class="mkapi-object-name">umap_representation</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">num_components=2</code>, <code class="mkapi-object-signature">num_neighbors=15</code>, <code class="mkapi-object-signature">metric=&#39;euclidean&#39;</code>, <code class="mkapi-object-signature">max_samples=100000</code>, <code class="mkapi-object-signature">verbose=True</code>, <code class="mkapi-object-signature">**kwargs</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Run Uniform Manifold Approximation and Projection (UMAP)
dimensionality reduction.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">num_components</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of components, two offers easy visualisation.
Defaults to 2.</span></li>

<li><code class="mkapi-item-name">num_neighbors</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of neighbours, should be between 2-100.
Defaults to 15.</span></li>


<li><code class="mkapi-item-name">max_samples</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">UMAP does not handle very large sample sizes well.
Increase if you want to go and get coffee. Defaults to 100_000.</span></li>


<li><code class="mkapi-item-name">**kwargs</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Any keyword arguments for <code>umap.UMAP</code>.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(ndarray, ndarray)</span>
        </div>
      <div class="mkapi-section-body returns"><p>UMAP representation and indices of the selected samples</p></div>
    </div>
  </div>

</div>
    </div>
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep._outliers._detect.OutlierDetector.pca_representation">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h3 id="histoprep_outliers_detectoutlierdetectorpca_representation" class="mkapi-object-body method"><code class="mkapi-object-name">pca_representation</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">num_components=2</code>, <code class="mkapi-object-signature">max_samples=1000000</code>, <code class="mkapi-object-signature">**kwargs</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Run princical component analysis (PCA) to get a representation of
metrics. Does not produce as nice results as UMAP, but it's faster and
supported out-of-the-box.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">num_components</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of components, two offers easy visualisation.
Defaults to 2.</span></li>

<li><code class="mkapi-item-name">max_samples</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">PCA does handle very large sample sizes well, but this argument
can be used to limit the number of samples. Defaults to 1_000_000.</span></li>

<li><code class="mkapi-item-name">**kwargs</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Any keyword arguments for <code>sklearn.decomposition.PCA</code>.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(ndarray, ndarray)</span>
        </div>
      <div class="mkapi-section-body returns"><p>PCA representation and indices of the selected samples</p></div>
    </div>
  </div>

</div>
    </div>
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep._outliers._detect.OutlierDetector.plot_representation">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h3 id="histoprep_outliers_detectoutlierdetectorplot_representation" class="mkapi-object-body method"><code class="mkapi-object-name">plot_representation</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">coordinates</code>, <code class="mkapi-object-signature">indices</code>, <code class="mkapi-object-signature">label_clusters=False</code>, <code class="mkapi-object-signature">size=0.5</code>, <code class="mkapi-object-signature">cmap=None</code>, <code class="mkapi-object-signature">figsize=(9.600000000000001, 7.199999999999999)</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Plot representation of metrics.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">coordinates</code>
<span class="mkapi-item-type">(ndarray)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Representation coordinates.</span></li>

<li><code class="mkapi-item-name">indices</code>
<span class="mkapi-item-type">(ndarray)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Sample indices returned by <code>{umap, pca}_representation</code>.</span></li>


<li><code class="mkapi-item-name">size</code>
<span class="mkapi-item-type">(float, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Size of each dot. Defaults to 0.5.</span></li>

<li><code class="mkapi-item-name">cmap</code>
<span class="mkapi-item-type">(str, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Colour map. Defaults to "plasma" for distance and "coolwarm_r" for
clusters.</span></li>

<li><code class="mkapi-item-name">figsize</code>
<span class="mkapi-item-type">(float, float), optional</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Figure size. Defaults to  Defaults to
(default_width * 1.5, default_height * 1.5).</span></li>

<li><code class="mkapi-item-name">label_clusers</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Label each cluster in the plot instead of log(distance).</span></li>


</ul></div>
    </div>
  </div>

</div>
    </div>
  
  </div>

</div>

<div class="mkapi-node" id="histoprep._outliers._visualize.OutlierVisualizer">
<div class='mkapi-object-container'>
  <div class="mkapi-object class code top">
    <div class="mkapi-object-kind class top">class</div>
    <h2 id="histoprep_outliers_visualizeoutliervisualizer" class="mkapi-object-body class top"><code class="mkapi-object-name">OutlierVisualizer</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">metadata</code><code class="mkapi-object-parenthesis">)</code></h2>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Visualise preprocessing metrics to identify outliers.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">metadata</code>
<span class="mkapi-item-type">(DataFrame)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Metadata with preprocessing metrics.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">import histoprep
# Initialize class.
visualise = histoprep.OutlierVisualizer(metadata)
# Lets visualise tiles with data loss...
visualise.plot_histogram_with_examples(column=&quot;black_pixels&quot;)
# ... or with too much background ...
visualise.plot_histogram_with_examples(column=&quot;background&quot;)
# ... or if the colour channel variances picked up any outlies.
visualise.plot_rgb_std(log_scale=True)
visualise.plot_hsv_std(log_scale=True)
</code></pre></div>
    </div>
  <div class="mkapi-section methods">
      <div class="mkapi-section-name methods">
          <span class="mkapi-section-name-body methods">Methods</span> 
        </div>
      <div class="mkapi-section-body methods"><ul class="mkapi-items">
<li class="method"><code class="mkapi-item-name"><a href="#histoprep._outliers._visualize.OutlierVisualizer.plot_histogram_with_examples">plot_histogram_with_examples</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">column</code>, <code class="mkapi-object-signature">bins</code>, <code class="mkapi-object-signature">num_examples</code>, <code class="mkapi-object-signature">log_scale</code>, <code class="mkapi-object-signature">figsize</code><code class="mkapi-object-parenthesis">)</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Plot a histogram of column values, with example tiles from each bin.</span></li>

<li class="method"><code class="mkapi-item-name"><a href="#histoprep._outliers._visualize.OutlierVisualizer.plot_hsv_mean">plot_hsv_mean</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">bins</code>, <code class="mkapi-object-signature">log_scale</code>, <code class="mkapi-object-signature">figsize</code><code class="mkapi-object-parenthesis">)</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Plot the standard deviation of HSV channels for each tile.</span></li>

<li class="method"><code class="mkapi-item-name"><a href="#histoprep._outliers._visualize.OutlierVisualizer.plot_hsv_quantiles">plot_hsv_quantiles</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">bins</code>, <code class="mkapi-object-signature">log_scale</code>, <code class="mkapi-object-signature">figsize</code><code class="mkapi-object-parenthesis">)</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Plot the quantile values of RGB channels for each tile.</span></li>

<li class="method"><code class="mkapi-item-name"><a href="#histoprep._outliers._visualize.OutlierVisualizer.plot_hsv_std">plot_hsv_std</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">bins</code>, <code class="mkapi-object-signature">log_scale</code>, <code class="mkapi-object-signature">figsize</code><code class="mkapi-object-parenthesis">)</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Plot the standard deviation of HSV channels for each tile.</span></li>

<li class="method"><code class="mkapi-item-name"><a href="#histoprep._outliers._visualize.OutlierVisualizer.plot_rgb_mean">plot_rgb_mean</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">bins</code>, <code class="mkapi-object-signature">log_scale</code>, <code class="mkapi-object-signature">figsize</code><code class="mkapi-object-parenthesis">)</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Plot the standard deviation of RGB (and gray) channels for each tile.</span></li>

<li class="method"><code class="mkapi-item-name"><a href="#histoprep._outliers._visualize.OutlierVisualizer.plot_rgb_quantiles">plot_rgb_quantiles</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">bins</code>, <code class="mkapi-object-signature">log_scale</code>, <code class="mkapi-object-signature">figsize</code><code class="mkapi-object-parenthesis">)</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Plot the quantile values of RGB channels for each tile.</span></li>

<li class="method"><code class="mkapi-item-name"><a href="#histoprep._outliers._visualize.OutlierVisualizer.plot_rgb_std">plot_rgb_std</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">bins</code>, <code class="mkapi-object-signature">log_scale</code>, <code class="mkapi-object-signature">figsize</code><code class="mkapi-object-parenthesis">)</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Plot the standard deviation of RGB (and gray) channels for each tile.</span></li>


</ul></div>
    </div>
  </div>

  <div class="mkapi-members">
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep._outliers._visualize.OutlierVisualizer.plot_rgb_mean">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h3 id="histoprep_outliers_visualizeoutliervisualizerplot_rgb_mean" class="mkapi-object-body method"><code class="mkapi-object-name">plot_rgb_mean</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">bins=50</code>, <code class="mkapi-object-signature">log_scale=False</code>, <code class="mkapi-object-signature">figsize=(12.8, 4.8)</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Plot the standard deviation of RGB (and gray) channels for each tile.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">bins</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of bins. Defaults to 50.</span></li>

<li><code class="mkapi-item-name">log_scale</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Set y-axis to logarithmic scale. Defaults to False.</span></li>

<li><code class="mkapi-item-name">figsize</code>
<span class="mkapi-item-type">(float, float), optional</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Figure size. Defaults to (default_w * 2, default_h).</span></li>


</ul></div>
    </div>
  </div>

</div>
    </div>
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep._outliers._visualize.OutlierVisualizer.plot_rgb_std">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h3 id="histoprep_outliers_visualizeoutliervisualizerplot_rgb_std" class="mkapi-object-body method"><code class="mkapi-object-name">plot_rgb_std</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">bins=50</code>, <code class="mkapi-object-signature">log_scale=False</code>, <code class="mkapi-object-signature">figsize=(12.8, 4.8)</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Plot the standard deviation of RGB (and gray) channels for each tile.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">bins</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of bins. Defaults to 50.</span></li>

<li><code class="mkapi-item-name">log_scale</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Set y-axis to logarithmic scale. Defaults to False.</span></li>

<li><code class="mkapi-item-name">figsize</code>
<span class="mkapi-item-type">(float, float), optional</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Figure size. Defaults to (default_w * 2, default_h).</span></li>


</ul></div>
    </div>
  </div>

</div>
    </div>
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep._outliers._visualize.OutlierVisualizer.plot_hsv_mean">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h3 id="histoprep_outliers_visualizeoutliervisualizerplot_hsv_mean" class="mkapi-object-body method"><code class="mkapi-object-name">plot_hsv_mean</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">bins=50</code>, <code class="mkapi-object-signature">log_scale=False</code>, <code class="mkapi-object-signature">figsize=(9.600000000000001, 4.8)</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Plot the standard deviation of HSV channels for each tile.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">bins</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of bins. Defaults to 50.</span></li>

<li><code class="mkapi-item-name">log_scale</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Set y-axis to logarithmic scale. Defaults to False.</span></li>

<li><code class="mkapi-item-name">figsize</code>
<span class="mkapi-item-type">(float, float), optional</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Figure size. Defaults to (default_w * 1.5, default_h).</span></li>


</ul></div>
    </div>
  </div>

</div>
    </div>
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep._outliers._visualize.OutlierVisualizer.plot_hsv_std">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h3 id="histoprep_outliers_visualizeoutliervisualizerplot_hsv_std" class="mkapi-object-body method"><code class="mkapi-object-name">plot_hsv_std</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">bins=50</code>, <code class="mkapi-object-signature">log_scale=False</code>, <code class="mkapi-object-signature">figsize=(9.600000000000001, 4.8)</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Plot the standard deviation of HSV channels for each tile.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">bins</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of bins. Defaults to 50.</span></li>

<li><code class="mkapi-item-name">log_scale</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Set y-axis to logarithmic scale. Defaults to False.</span></li>

<li><code class="mkapi-item-name">figsize</code>
<span class="mkapi-item-type">(float, float), optional</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Figure size. Defaults to (default_w * 1.5, default_h).</span></li>


</ul></div>
    </div>
  </div>

</div>
    </div>
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep._outliers._visualize.OutlierVisualizer.plot_rgb_quantiles">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h3 id="histoprep_outliers_visualizeoutliervisualizerplot_rgb_quantiles" class="mkapi-object-body method"><code class="mkapi-object-name">plot_rgb_quantiles</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">bins=50</code>, <code class="mkapi-object-signature">log_scale=False</code>, <code class="mkapi-object-signature">figsize=(12.8, 9.6)</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Plot the quantile values of RGB channels for each tile.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">bins</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of bins. Defaults to 50.</span></li>

<li><code class="mkapi-item-name">log_scale</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Set y-axis to logarithmic scale. Defaults to False.</span></li>

<li><code class="mkapi-item-name">figsize</code>
<span class="mkapi-item-type">(float, float), optional</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Figure size. Defaults to (default_w * 2, default_h * 2).</span></li>


</ul></div>
    </div>
  </div>

</div>
    </div>
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep._outliers._visualize.OutlierVisualizer.plot_hsv_quantiles">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h3 id="histoprep_outliers_visualizeoutliervisualizerplot_hsv_quantiles" class="mkapi-object-body method"><code class="mkapi-object-name">plot_hsv_quantiles</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">bins=50</code>, <code class="mkapi-object-signature">log_scale=False</code>, <code class="mkapi-object-signature">figsize=(12.8, 9.6)</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Plot the quantile values of RGB channels for each tile.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">bins</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of bins. Defaults to 50.</span></li>

<li><code class="mkapi-item-name">log_scale</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Set y-axis to logarithmic scale. Defaults to False.</span></li>

<li><code class="mkapi-item-name">figsize</code>
<span class="mkapi-item-type">(float, float), optional</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Figure size. Defaults to (default_w * 2, default_h * 2).</span></li>


</ul></div>
    </div>
  </div>

</div>
    </div>
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep._outliers._visualize.OutlierVisualizer.plot_histogram_with_examples">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h3 id="histoprep_outliers_visualizeoutliervisualizerplot_histogram_with_examples" class="mkapi-object-body method"><code class="mkapi-object-name">plot_histogram_with_examples</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">column</code>, <code class="mkapi-object-signature">bins=30</code>, <code class="mkapi-object-signature">num_examples=16</code>, <code class="mkapi-object-signature">log_scale=True</code>, <code class="mkapi-object-signature">figsize=(12.8, 9.6)</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Plot a histogram of column values, with example tiles from each bin.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">column</code>
<span class="mkapi-item-type">(str)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Name of the column to plot.</span></li>

<li><code class="mkapi-item-name">bins</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of bins. Defaults to 30.</span></li>

<li><code class="mkapi-item-name">num_examples</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of example images per bin. Defaults to 16.</span></li>

<li><code class="mkapi-item-name">log_scale</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Set y-axis to logarithmic scale. Defaults to True.</span></li>

<li><code class="mkapi-item-name">figsize</code>
<span class="mkapi-item-type">(float, float), optional</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Figure size. Defaults to (default_w * 2, default_h * 2).</span></li>


</ul></div>
    </div>
  </div>

</div>
    </div>
  
  </div>

</div>

<div class="mkapi-node" id="histoprep.functional">
<div class='mkapi-object-container'>
  <div class="mkapi-object package plain top">
    <div class="mkapi-object-kind package top">package</div>
    <h2 id="histoprepfunctional" class="mkapi-object-body package top"><span class="mkapi-object-name">functional</span></h2>
  </div>
  
</div>


</div>

<div class="mkapi-node" id="histoprep.functional._preprocess.PreprocessMetrics">
<div class='mkapi-object-container'>
  <div class="mkapi-object class code top">
    <div class="mkapi-object-kind class top">class</div>
    <h3 id="histoprepfunctional_preprocesspreprocessmetrics" class="mkapi-object-body class top"><code class="mkapi-object-name">PreprocessMetrics</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">channel_resize=64</code>, <code class="mkapi-object-signature">quantiles=[0.05, 0.1, 0.5, 0.9, 0.95]</code>, <code class="mkapi-object-signature">sharpness_reduce=&#39;max&#39;</code>, <code class="mkapi-object-signature">custom_callback=None</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Class to calculate basic preprocessing metrics for a histological image.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">channel_resize</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Image size for <code>F.channel_quantiles()</code>. Defaults to 128.</span></li>

<li><code class="mkapi-item-name">quantiles</code>
<span class="mkapi-item-type">(list of int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">RGB and HSV quantiles. Defaults to
[0.05, 0.1, 0.5, 0.9, 0.95].</span></li>

<li><code class="mkapi-item-name">sharpness_reduce</code>
<span class="mkapi-item-type">(str or list, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Sharpness reduction method. Defaults to "max".</span></li>

<li><code class="mkapi-item-name">custom_callback</code>
<span class="mkapi-item-type">(optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Custom callback for to calculate new metrics. Defaults
to None.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">import histoprep.functional as F
from histoprep.helpers import read_image

image = read_image(&quot;path/to/image.jpeg&quot;)
threshold, tissue_mask = F.detect_tissue(image)
metric_fn = PreprocessMetrics(threshold)
results = metric_fn(image)
</code></pre></div>
    </div>
  <div class="mkapi-section methods">
      <div class="mkapi-section-name methods">
          <span class="mkapi-section-name-body methods">Methods</span> 
        </div>
      <div class="mkapi-section-body methods"><ul class="mkapi-items">
<li class="method"><code class="mkapi-item-name"><a href="#histoprep.functional._preprocess.PreprocessMetrics.__call__">__call__</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">image</code>, <code class="mkapi-object-signature">tissue_threshold</code><code class="mkapi-object-parenthesis">)</code>
<span class="mkapi-item-type">(dict(str: float))</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Calculate preprocessing metrics for an image,</span></li>


</ul></div>
    </div>
  </div>

  <div class="mkapi-members">
  
    <div class="mkapi-member">
      <div class="mkapi-node" id="histoprep.functional._preprocess.PreprocessMetrics.__call__">
<div class='mkapi-object-container'>
  <div class="mkapi-object method code">
    <div class="mkapi-object-kind method">method</div>
    <h4 id="histoprepfunctional_preprocesspreprocessmetricscall" class="mkapi-object-body method"><code class="mkapi-object-name">__call__</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">image</code>, <code class="mkapi-object-signature">tissue_threshold</code><code class="mkapi-object-parenthesis">)</code></h4>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Calculate preprocessing metrics for an image,</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">image</code>
<span class="mkapi-item-type">(ndarray or Image)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Input image.</span></li>


<li><code class="mkapi-item-name">threshold</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Tissue detection threshold for the tile images. Otsu's
method cannot not be used here as some of the tiles may not
contain background, and the method would still find an "optimal"
threshold and classify tissue as background.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(dict(str: float))</span>
        </div>
      <div class="mkapi-section-body returns"><p>Preprocessing metrics.</p></div>
    </div>
  </div>

</div>
    </div>
  
  </div>

</div>

<div class="mkapi-node" id="histoprep.functional._helpers.arr2pil">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="histoprepfunctional_helpersarr2pil" class="mkapi-object-body function top"><code class="mkapi-object-name">arr2pil</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">image</code>, <code class="mkapi-object-signature">equalize=False</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Convert numpy array to a Pillow image.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">image</code>
<span class="mkapi-item-type">(ndarray or Image)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Image array.</span></li>

<li><code class="mkapi-item-name">equalize</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Equalise image, useful for plotting masks.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(Image)</span>
        </div>
      <div class="mkapi-section-body returns"><p>Pillow image.</p></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">import histoprep.functional as F
from histoprep.helpers import read_image

image = read_image(&quot;path/to/image.jpeg&quot;)
tissue_mask = F.detect_tissue(image)
# Create nice mask image for visualization.
tissue_mask_pil = F.arr2pil(1 - tissue_mask, equalize=True)
</code></pre></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.functional._preprocess.channel_quantiles">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="histoprepfunctional_preprocesschannel_quantiles" class="mkapi-object-body function top"><code class="mkapi-object-name">channel_quantiles</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">image</code>, <code class="mkapi-object-signature">tissue_mask=None</code>, <code class="mkapi-object-signature">quantiles=[0.05, 0.1, 0.5, 0.9, 0.95]</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Calculate image channel quantiles which is useful in the detection of
artifacts and shitty images. If the input image is RGB, HSV quantiles are
also automatically calculated.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">image</code>
<span class="mkapi-item-type">(ndarray or Image)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Input image.</span></li>

<li><code class="mkapi-item-name">tissue_mask</code>
<span class="mkapi-item-type">(ndarray, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Tissue mask for the input image. Helpful for discarding
background in quantile evaluation. Defaults to None.</span></li>

<li><code class="mkapi-item-name">quantiles</code>
<span class="mkapi-item-type">(list of float, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Quantiles to be collected. Defaults to
[0.05, 0.1, 0.5, 0.9, 0.95].</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(dict(str: list of int))</span>
        </div>
      <div class="mkapi-section-body returns"><p>Quantiles for each image channel.</p></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">import histoprep.functional as F
from histoprep.helpers import read_image

image = read_image(&quot;path/to/image.jpeg&quot;)
results = F.channel_quantiles(image)
</code></pre></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.functional._preprocess.channel_std">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="histoprepfunctional_preprocesschannel_std" class="mkapi-object-body function top"><code class="mkapi-object-name">channel_std</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">image</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Calculate standard deviation in each image channel.</p>
<p>If the image is grayscale, only the total standard deviation is returned.
Else both RGB and HSV channel standard deviations are evaluated.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">image</code>
<span class="mkapi-item-type">(ndarray or Image)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Input image.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(dict(str: float))</span>
        </div>
      <div class="mkapi-section-body returns"><p>Channel standard deviations.</p></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">import histoprep.functional as F
from histoprep.helpers import read_image

image = read_image(&quot;path/to/image.jpeg&quot;)
channel_std = F.channel_std(image)
</code></pre></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.functional._preprocess.data_loss">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="histoprepfunctional_preprocessdata_loss" class="mkapi-object-body function top"><code class="mkapi-object-name">data_loss</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">image</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Calculates the percentage of completely white and black pixels.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">image</code>
<span class="mkapi-item-type">(ndarray or Image)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Input image.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(dict(str: float))</span>
        </div>
      <div class="mkapi-section-body returns"><p>Percentages of completely black (0) and white (255) pixels.</p></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">import histoprep.functional as F
from histoprep.helpers import read_image

image = read_image(&quot;path/to/image.jpeg&quot;)
black_pixels, white_pixels = F.data_loss(image).values()
</code></pre></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.functional._dearray.dearray">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="histoprepfunctional_dearraydearray" class="mkapi-object-body function top"><code class="mkapi-object-name">dearray</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">tissue_mask</code>, <code class="mkapi-object-signature">kernel_size=5</code>, <code class="mkapi-object-signature">iterations=3</code>, <code class="mkapi-object-signature">min_area=0.1</code>, <code class="mkapi-object-signature">max_area=3.0</code><code class="mkapi-object-parenthesis">)</code><span class="mkapi-item-type"> &#x2192; (ndarray, (int, int, int, int), list of int)</span></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Detects TMA spots from an image and gives each spot a number starting
from the top-left corner.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">tissue_mask</code>
<span class="mkapi-item-type">(ndarray)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Tissue mask.</span></li>

<li><code class="mkapi-item-name">kernel_size</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Kernel size for dilate. Defaults to 5.</span></li>

<li><code class="mkapi-item-name">iterations</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Dilate iterations. Defaults to 3.</span></li>

<li><code class="mkapi-item-name">min_area</code>
<span class="mkapi-item-type">(float, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Minimum area for a spot. Defaults to 0.1 and calculated with:
<code>median(areas) * min_area</code></span></li>




</ul></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.functional._tissue.detect_tissue">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="histoprepfunctional_tissuedetect_tissue" class="mkapi-object-body function top"><code class="mkapi-object-name">detect_tissue</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">image</code>, <code class="mkapi-object-signature">threshold=None</code>, <code class="mkapi-object-signature">multiplier=1.0</code>, <code class="mkapi-object-signature">sigma=1.0</code>, <code class="mkapi-object-signature">remove_white=False</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Detect tissue from image.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">image</code>
<span class="mkapi-item-type">(ndarray or Image)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Input image.</span></li>

<li><code class="mkapi-item-name">threshold</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Threshold for tissue detection. If set, will detect tissue by
global thresholding, and otherwise Otsu's method is used to find
a threshold. Defaults to None.</span></li>

<li><code class="mkapi-item-name">multiplier</code>
<span class="mkapi-item-type">(float, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Otsu's method is used to find an optimal threshold by
minimizing the weighted within-class variance. This threshold is
then multiplied with <code>multiplier</code>. Used only if <code>threshold</code> is None.
Defaults to 1.0.</span></li>

<li><code class="mkapi-item-name">sigma</code>
<span class="mkapi-item-type">(float, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Sigma for gaussian blurring. Defaults to 1.0.</span></li>

<li><code class="mkapi-item-name">remove_white</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Does not consider white pixels with Otsu's method. Useful
for slide images where large areas are artificially set to white.
Defaults to False.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(ndarray)</span>
        </div>
      <div class="mkapi-section-body returns"><p>Binary mask with 0=background and 1=tissue.</p></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">import histoprep.functional as F
from histoprep.helpers import read_image

image = read_image(&quot;path/to/image.jpeg&quot;)
tissue_mask = F.detect_tissue(image)
</code></pre></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.functional._helpers.downsample_image">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="histoprepfunctional_helpersdownsample_image" class="mkapi-object-body function top"><code class="mkapi-object-name">downsample_image</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">image</code>, <code class="mkapi-object-signature">max_dimension=2048</code>, <code class="mkapi-object-signature">return_arr=False</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Donwsaple image until one of the dimensions is less than <code>max_dimension</code>.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">image</code>
<span class="mkapi-item-type">(ndarray or Image)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Image to be downsampled.</span></li>

<li><code class="mkapi-item-name">max_dimension</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Maximum dimension size. Defaults to 2048.</span></li>



</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(Image or ndarray)</span>
        </div>
      <div class="mkapi-section-body returns"><p>Downsampled image.</p></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">import histoprep.functional as F
from histoprep.helpers import read_image

image = read_image(&quot;path/to/image.jpeg&quot;)
downsampled = F.downsample_image(image, max_dimension=32)
assert all(x&lt;=32 for x in downsampled.size)
</code></pre></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.functional._coordinates.filter_coordinates">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="histoprepfunctional_coordinatesfilter_coordinates" class="mkapi-object-body function top"><code class="mkapi-object-name">filter_coordinates</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">coordinates</code>, <code class="mkapi-object-signature">tissue_mask</code>, <code class="mkapi-object-signature">max_background=0.95</code>, <code class="mkapi-object-signature">downsample=1.0</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Filter a list of coordinates based on the amount of background.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">coordinates</code>
<span class="mkapi-item-type">(list of (int, int, int))</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">List of coordinates in XYWH format.</span></li>


<li><code class="mkapi-item-name">max_background</code>
<span class="mkapi-item-type">(float, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Maximum amount of background in tile.  Defaults to 0.95.</span></li>

<li><code class="mkapi-item-name">downsample</code>
<span class="mkapi-item-type">(Union(float, (float, float)), optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Downsample of the tissue mask. Defaults to 1.</span></li>

<li><code class="mkapi-item-name">mask</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Tissue mask.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(list of (int, int, int, int, float))</span>
        </div>
      <div class="mkapi-section-body returns"><p>Filtered list of coordinates.</p></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">import histoprep.functional as F
from histoprep.helpers import read_image

# Read image and extract tile coordinates.
image = read_image(&quot;path/to/image.jpeg&quot;)
coordinates = F.tile_coordinates(
    dimensions=image.size,
    width=512,
    overlap=0.25,
)
# Detect tissue.
tissue_mask = F.detect_tissue(image)
# Filter coordinates based on the amount of background.
filtered_coordinates = F.filter_coordinates(
    coordinates=coordinates,
    tissue_mask=tissue_mask,
    max_background=0.9,
)
</code></pre></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.functional._helpers.resize_image">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="histoprepfunctional_helpersresize_image" class="mkapi-object-body function top"><code class="mkapi-object-name">resize_image</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">image</code>, <code class="mkapi-object-signature">shape</code>, <code class="mkapi-object-signature">return_arr=False</code>, <code class="mkapi-object-signature">fast_resize=False</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Resize image to desired shape.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">image</code>
<span class="mkapi-item-type">(Image or ndarray)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Input image.</span></li>

<li><code class="mkapi-item-name">shape</code>
<span class="mkapi-item-type">(int or (int))</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Shape of the output image. If shape is an integer then the image
is resized to a square of (shape, shape).</span></li>

<li><code class="mkapi-item-name">return_arr</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Return array. Defaults to False.</span></li>

<li><code class="mkapi-item-name">fast_resize</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Uses nearest neigbour interpolation. Defaults to False.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(Image or ndarray)</span>
        </div>
      <div class="mkapi-section-body returns"><p>Resized image.</p></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">import histoprep.functional as F
from histoprep.helpers import read_image

image = read_image(&quot;path/to/image.jpeg&quot;)
resized_32 = F.resize_image(image, (32, 32))
resized_32 = F.resize_image(image, 32)
resized_32_arr = F.resize_image(image, 32, return_arr=True)
</code></pre></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.functional._helpers.rgb2gray">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="histoprepfunctional_helpersrgb2gray" class="mkapi-object-body function top"><code class="mkapi-object-name">rgb2gray</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">image</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Convert an RGB image to grayscale.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">image</code>
<span class="mkapi-item-type">(ndarray or Image)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">RGB image.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(ndarray or Image)</span>
        </div>
      <div class="mkapi-section-body returns"><p>Grayscale image.</p></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.functional._helpers.rgb2hsv">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="histoprepfunctional_helpersrgb2hsv" class="mkapi-object-body function top"><code class="mkapi-object-name">rgb2hsv</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">image</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Convert an RGB image to HSV.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">image</code>
<span class="mkapi-item-type">(ndarray or Image)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">RGB image.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(ndarray or Image)</span>
        </div>
      <div class="mkapi-section-body returns"><p>HSV image.</p></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.functional._preprocess.sharpness">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="histoprepfunctional_preprocesssharpness" class="mkapi-object-body function top"><code class="mkapi-object-name">sharpness</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">image</code>, <code class="mkapi-object-signature">reduce=&#39;max&#39;</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>The method takes five crops from the image and calculates the standard
deviation of the crops after a Laplace transformation. These values then
reduced with the selected method.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">image</code>
<span class="mkapi-item-type">(ndarray or Image)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Input image.</span></li>


<li><code class="mkapi-item-name">reduction</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Reduction method(s) for the Laplacian variance values for
each crop. Defaults to "max".</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(dict(str: float))</span>
        </div>
      <div class="mkapi-section-body returns"><p>Reduced laplacian standard deviation of the crops.</p></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">import histoprep.functional as F
from histoprep.helpers import read_image

image = read_image(&quot;path/to/image.jpeg&quot;)
sharpness = F.sharpness(image, &quot;median&quot;)
</code></pre></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.functional._coordinates.tile_coordinates">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="histoprepfunctional_coordinatestile_coordinates" class="mkapi-object-body function top"><code class="mkapi-object-name">tile_coordinates</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">dimensions</code>, <code class="mkapi-object-signature">width</code>, <code class="mkapi-object-signature">height=None</code>, <code class="mkapi-object-signature">overlap=0.0</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Extract a list of tile coordinates based on image dimensions.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">dimensions</code>
<span class="mkapi-item-type">(int, int)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Image dimensions (height, width).</span></li>

<li><code class="mkapi-item-name">width</code>
<span class="mkapi-item-type">(int)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Width of a tile.</span></li>

<li><code class="mkapi-item-name">height</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Height of a tile. If None, will be set to width. Defaults to None.</span></li>

<li><code class="mkapi-item-name">overlap</code>
<span class="mkapi-item-type">(float, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Overlap between neighbouring tiles. Defaults to 0.0.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(list of (int, int, int, int))</span>
        </div>
      <div class="mkapi-section-body returns"><p>Tile coordinates in XYWH format.</p></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">import histoprep.functional as F
from histoprep.helpers import read_image

# Read image and extract tile coordinates.
image = read_image(&quot;path/to/image.jpeg&quot;)
coordinates = F.tile_coordinates(
    dimensions=image.size,
    width=512,
    overlap=0.25,
)
</code></pre></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.helpers">
<div class='mkapi-object-container'>
  <div class="mkapi-object package plain top">
    <div class="mkapi-object-kind package top">package</div>
    <h2 id="histoprephelpers" class="mkapi-object-body package top"><span class="mkapi-object-name">helpers</span></h2>
  </div>
  
</div>


</div>

<div class="mkapi-node" id="histoprep.helpers._metadata.combine_metadata">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="histoprephelpers_metadatacombine_metadata" class="mkapi-object-body function top"><code class="mkapi-object-name">combine_metadata</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">parent_dir</code>, <code class="mkapi-object-signature">filename=&#39;tile_metadata.csv&#39;</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Combine metadata under <code>parent_dir</code> into a single dataframe.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">parent_dir</code>
<span class="mkapi-item-type">(str)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Output directory with the processed slides.</span></li>

<li><code class="mkapi-item-name">filename</code>
<span class="mkapi-item-type">(str, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Filename to match. Defaults to "tile_metadata.csv".</span></li>


</ul></div>
    </div>
  <div class="mkapi-section raises">
      <div class="mkapi-section-name raises">
          <span class="mkapi-section-name-body raises">Raises</span> 
        </div>
      <div class="mkapi-section-body raises"><ul class="mkapi-items">
<li><code class="mkapi-item-name">IOError</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Parent directory does not exist.</span></li>

<li><code class="mkapi-item-name">NotADirectoryError</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Parent directory is not a directory.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(pandas.DataFrame)</span>
        </div>
      <div class="mkapi-section-body returns"><p>Combined metadata.</p></div>
    </div>
  <div class="mkapi-section">
      <div class="mkapi-section-body"><p>Example:
   ```python
   from histoprep.helpers import combine_metadata</p>
<p>metadata = combine_metadata("/output/dir")
   ```</p></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.helpers._multiprocess.multiprocess_loop">
<div class='mkapi-object-container'>
  <div class="mkapi-object generator code top">
    <div class="mkapi-object-kind generator top">generator</div>
    <h3 id="histoprephelpers_multiprocessmultiprocess_loop" class="mkapi-object-body generator top"><code class="mkapi-object-name">multiprocess_loop</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">func</code>, <code class="mkapi-object-signature">iterable</code>, <code class="mkapi-object-signature">num_workers=None</code>, <code class="mkapi-object-signature">initializer=None</code>, <code class="mkapi-object-signature">initializer_args=()</code>, <code class="mkapi-object-signature">use_imap=True</code>, <code class="mkapi-object-signature">**kwargs</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Maps function and iteration with multiple workers and yields the outputs.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">func</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Function to be called on each list item.</span></li>

<li><code class="mkapi-item-name">iterable</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Iterable passed to the function.</span></li>

<li><code class="mkapi-item-name">num_workers</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of worker processes. If None, set to the number of
CPU cores. Defaults to None.</span></li>

<li><code class="mkapi-item-name">initializer</code>
<span class="mkapi-item-type">(optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Initializer function for each worker process. Defaults to
None.</span></li>

<li><code class="mkapi-item-name">initializer_args</code>
<span class="mkapi-item-type">(any), optional</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">: Arguments for the <code>initializer</code> function. Defaults to
().</span></li>

<li><code class="mkapi-item-name">use_imap</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Uses imap instead of map. Imap returns results in the same
order but is slightly slower to start up. Defaults to True.</span></li>

<li><code class="mkapi-item-name">**kwargs</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Passed to the <code>func</code>.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section">
      <div class="mkapi-section-body"><p>Return:
    Iterable of function outputs.</p></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">from histoprep.helpers import multiprocess_loop, read_image, progress_bar

tiles = []
for tile in multiprocess_loop(
    func=read_image,
    iterable=paths,
    num_workers=20,
    return_arr=True # &lt;- This is a keyword argument for read_image!
):
    tiles.append(tile)
</code></pre></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.helpers._verbose.progress_bar">
<div class='mkapi-object-container'>
  <div class="mkapi-object generator code top">
    <div class="mkapi-object-kind generator top">generator</div>
    <h3 id="histoprephelpers_verboseprogress_bar" class="mkapi-object-body generator top"><code class="mkapi-object-name">progress_bar</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">iterable</code>, <code class="mkapi-object-signature">total=None</code>, <code class="mkapi-object-signature">desc=None</code>, <code class="mkapi-object-signature">log_interval=1</code>, <code class="mkapi-object-signature">log_values=False</code>, <code class="mkapi-object-signature">suppress=False</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Simple print-based progress bar.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">iterable</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Iterable to wrap.</span></li>

<li><code class="mkapi-item-name">total</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Total steps. Defaults to None.</span></li>

<li><code class="mkapi-item-name">desc</code>
<span class="mkapi-item-type">(str, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Description for progress bar. Defaults to None.</span></li>

<li><code class="mkapi-item-name">log_interval</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Log every n steps. Defaults to 1.</span></li>

<li><code class="mkapi-item-name">log_values</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Returns (dict, next(iterable)), where values added to the dict are
logged to the progress bar. Defaults to True.</span></li>

<li><code class="mkapi-item-name">suppress</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Suppress all output. Defaults to False.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section yields">
      <div class="mkapi-section-name yields">
          <span class="mkapi-section-name-body yields">Yields</span> 
        </div>
      <div class="mkapi-section-body yields"><p>Iterable output</p></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.helpers._visualize.random_tile_collage">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="histoprephelpers_visualizerandom_tile_collage" class="mkapi-object-body function top"><code class="mkapi-object-name">random_tile_collage</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">paths</code>, <code class="mkapi-object-signature">nrows=16</code>, <code class="mkapi-object-signature">ncols=32</code>, <code class="mkapi-object-signature">px=32</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Plot random selection of the given paths.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">paths</code>
<span class="mkapi-item-type">(Union(list of str, series, ndarray))</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Image paths.</span></li>

<li><code class="mkapi-item-name">nrows</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of rows in collage. Defaults to 16.</span></li>

<li><code class="mkapi-item-name">ncols</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of columns in collage. Defaults to 32.</span></li>

<li><code class="mkapi-item-name">px</code>
<span class="mkapi-item-type">(int, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Size of each tile in collage. Defaults to 32.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(Image)</span>
        </div>
      <div class="mkapi-section-body returns"><p>Collage image of random tiles.</p></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">import matplotlib.pyplot as plt
from histoprep.helpers import random_tile_collage, combine_metadata

# Load metadata.
metadata = combine_metadata(&quot;/output_dir/&quot;)
data_loss_paths = metadata[&quot;black_pixels&quot; &gt; 0.05][&quot;path&quot;]
# Plot some tiles with data loss.
plt.imshow(random_tile_collage(data_loss_paths))
</code></pre></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.helpers._io.read_image">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="histoprephelpers_ioread_image" class="mkapi-object-body function top"><code class="mkapi-object-name">read_image</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">path</code>, <code class="mkapi-object-signature">return_arr=False</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Read image.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">path</code>
<span class="mkapi-item-type">(str)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Path to image</span></li>

<li><code class="mkapi-item-name">return_arr</code>
<span class="mkapi-item-type">(bool, optional)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Return array instead of PIL image. Defaults to False.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(Image or ndarray)</span>
        </div>
      <div class="mkapi-section-body returns"><p>Image from path.</p></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">from histoprep.helpers import read_image

image = read_image(&quot;path/to/image&quot;)
arr = read_image(&quot;path/to/image&quot;, return_arr=True)
</code></pre></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.helpers._files.remove_directory">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="histoprephelpers_filesremove_directory" class="mkapi-object-body function top"><code class="mkapi-object-name">remove_directory</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">dir_path</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Remove directory and all files.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">dir_path</code>
<span class="mkapi-item-type">(str)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Directory to be removed.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">from histoprep.helpers import remove_dir

remove_dir(&quot;/shitty/slide/output_dir&quot;)
</code></pre></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.helpers._metadata.rename_paths">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="histoprephelpers_metadatarename_paths" class="mkapi-object-body function top"><code class="mkapi-object-name">rename_paths</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">parent_dir</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Finds all metadata files inside <code>parent_dir</code> and updates the <code>path</code>
column to match the current directory. Useful if you rename/move around
the directories with the processed data.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">parent_dir</code>
<span class="mkapi-item-type">(str)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Output directory with the processed slides.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(list of (str, Exception))</span>
        </div>
      <div class="mkapi-section-body returns"><p>List csv-paths and Exceptions, for the dataframes which could not be
updated.</p></div>
    </div>
  <div class="mkapi-section">
      <div class="mkapi-section-body"><p>Example:
   ```python
   from histoprep.helpers import rename_paths</p>
<p>failures = rename_paths("/new/output/dir")
   ```</p></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="histoprep.helpers._metadata.strip_metric_colums">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="histoprephelpers_metadatastrip_metric_colums" class="mkapi-object-body function top"><code class="mkapi-object-name">strip_metric_colums</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">metadata</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Remove columns with preprocessing metrics.</p></div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">metadata</code>
<span class="mkapi-item-type">(DataFrame)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Tile metadata.</span></li>


</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(DataFrame)</span>
        </div>
      <div class="mkapi-section-body returns"><p>Tile metadata without preprocessing metrics.</p></div>
    </div>
  <div class="mkapi-section example">
      <div class="mkapi-section-name example">
          <span class="mkapi-section-name-body example">Example</span> 
        </div>
      <div class="mkapi-section-body example"><pre><code class="language-python">from histoprep.helpers import combine_metadata, strip_metric_colums

metadata = combine_metadata(&quot;/output/dir&quot;)
tile_info = strip_metric_columns(metadata)
</code></pre></div>
    </div>
  </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../examples/panda/panda/" class="btn btn-neutral float-left" title="Use case: PANDA dataset"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../examples/panda/panda/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../js/mkapi.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
